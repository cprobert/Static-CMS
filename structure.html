<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>s3cms folder structure</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
	<link href='stylesheets/base-v1.1.css' type='text/css' rel='stylesheet'/>

	<script src="scripts/jquery-1.8.2.min.js"></script>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="scripts/html5.js"></script>
    <![endif]-->
    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-8933957-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

  </head>

  <body onload="prettyPrint()">

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/Static-CMS/">Static-CMS</a>
          <div class="nav-collapse">
            <ul class="nav">
                  
                    <li class='active '>
                      <a href='structure.html'>
                        Structure
                      </a>
                    </li>
                  
                    <li class=' '>
                      <a href='deploy.html'>
                        Deploy
                      </a>
                    </li>
                  
                    <li class=' '>
                      <a href='http://ipassexam.github.io/Air-Monkey/'>
                        Editor
                      </a>
                    </li>
                  
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <!-- Main hero unit for a primary marketing message or call to action -->
	  <header id="overview" class="jumbotron subhead">
			
<div class="hero-unit">
	<h1>Folder Structure</h1>
	
	<p>At the simplest level s3cms publishes all files in the public folder.  You can also generate files that will be merged with these static assets.</p>
	
</div>

	  </header>

      <!-- Example row of columns -->
      <div class="row">
        <section id="gridSystem">
	<div class="span12">
		<h2>Folder Structure</h2>
		<p>Take a look in the new folder, it should look something like:</p>
		<ul>
			<li>_templates\skin.erb.html</li>
			<li>_views\home-intro.html</li>
			<li>_views\home-main.html</li>
			<li>_config.yml</li>
		</ul>
		<h2>Creating a Template</h2>
		<p>Open the template &quot;_templates/skin.html&quot;, and look at the code:</p>
		<div class="code">
          <pre class="prettyprint"><code class="language-html">
	&lt;!DOCTYPE html&gt;
	&lt;html lang=&quot;en&quot;&gt;
	  &lt;head&gt;
		&lt;title&gt;s3cms&lt;/title&gt;
		&lt;meta charset=&quot;utf-8&quot;&gt;
	  &lt;/head&gt;
	  &lt;body&gt;
		&lt;div class=&quot;container&quot;&gt;
			&lt;header&gt;
			  &lt;%= page.views[&quot;intro&quot;] %&gt;
			&lt;/header&gt;
		  &lt;div&gt;
		    &lt;%= page.views[&quot;main&quot;] %&gt;
		  &lt;/div&gt;
		  &lt;footer&gt;&lt;/footer&gt;
		&lt;/div&gt; 
	  &lt;/body&gt;
	&lt;/html&gt;
          </code></pre>

		</div>
		<p>This is standard HTML 5 mark-up for a page. What&#39;s interesting is the code: <strong>&lt;%= page.views[&quot;intro&quot;] %&gt;</strong> . This is how you inject the content from the view into the page.</p>
      <p>Further reading for the template language <a href="http://www.stuartellis.eu/articles/erb/">http://www.stuartellis.eu/articles/erb/</a></p>
		<h2>Creating a view</h2>
		<p>Open the views (home-intro.html and home-main.html) in your favourite text editor and add some html, e.g</p>
		<div class="code">
          <pre class="prettyprint"><code class="language-html">
    &lt;p&gt;Hello World&lt;/p&gt;
    &lt;p&gt;This is an example view&lt;/p&gt;
          </code></pre>

		</div>
		<h2>Editing your config.yml</h2>
		<p>The content of your config.yml should look like:</p>
		<div class="code">
        
        <pre class="prettyprint"><code class="language-yaml">
    template: templates/skin.html

    pages:
    - index: 
        generate: index.html 
        views : 
            intro: views/home-intro.html
            main: views/home-main.html
        </code></pre>

		</div>
		<p>What&#39;s going on here?</p>
		<p>The &quot;pages&quot; configuration option contains a list of pages. Each page in turn contains the name of the page to generate and a list of views to &#39;inject&#39; into the template.</p>
		<p>The view defined as intro: will be injected into template here: &lt;%= page.views[&quot;intro&quot;] %&gt;<br />
			The view defined as main: will be injected into template here: &lt;%= page.views[&quot;main&quot;] %&gt;<br />
			<em>Note: Yaml doesn&#39;t like it if you use [tab] key - use spaces insted.</em></p>
		
		<h2>Asset Bundling</h2>
		<p>It&#39;s best practise to <a href="http://developer.yahoo.com/performance/rules.html#num_http" target="_blank">minimise your download requests</a>. s3cms has a system that allows you to &#39;bundle&#39; your css and javascript files. In your config.yaml (replace references with the names of your assets):</p>
		<div class="code">
		<pre class="prettyprint"><code class="language-yaml">
	bundles:
	- script:
		generate: scripts/script-v1.0.js
		files:
		 - scripts/demo.js
	- libraries:
		generate: scripts/libs-v1.0.js
		files:
		 - google-code-prettify/prettify.js
		 - google-code-prettify/lang-yaml.js
		 - scripts/bootstrap-button.js
	- styles:
		generate: stylesheets/styles-v1.0.js
		files:
		  - stylesheets/bootstrap.css
		  - stylesheets/demo.css
		  - stylesheets/bootstrap-responsive.css
		  - google-code-prettify/sons-of-obsidian.css
		</code></pre>
		</div>
		<p>Whats going on here?</p>
		<p>Like the &quot;pages&quot; configuration option you can specify lists for your scripts and stylesheets.</p>
		<p>You then replace your script and css references in your skin file like this:</p>
		<div class="code">
		<pre class="prettyprint"><code class="language-rb">
    &lt;link href=&#39;&lt;%= page.stylesheets[&quot;styles&quot;] %&gt;&#39; type=&#39;text/css&#39; rel=&#39;stylesheet&#39;/&gt;
    &lt;script src=&#39;&lt;%= page.scripts[&quot;libraries&quot;] %&gt;&#39;&gt;&lt;/script&gt;
		</code></pre>
		</div>
		<p>Note the version is automatically built into the name of the bundled asset.</p>
	</div>
</section>


      </div>

      <hr>

      <footer>
		<p id="view-theme-vars"><a class="btn" href="#">View theme variables</a></p>
		<div style="diplay: none;" id="theme-vars">
			<p>Page Name: structure</p>
			<p>Bundles: {"base"=>"stylesheets/base-v1.1.css", "libraries-min"=>"scripts/libraries-min-v1.1.js"}</p>
			<p>Config: {"generate"=>"structure.html", "resource"=>"_resources/structure.yml", "views"=>{"intro"=>"_views/structure-intro.erb", "main"=>"_views/structure-main.erb"}}</p>
			
			
			<p>Resource: {"title"=>"s3cms folder structure"}</p>
			<p>Views: (access like this: page.views["viewname"])</p>
		</div>
		<script>
			$(function(){
				$("#theme-vars").hide();
				$("#view-theme-vars").click(function(e){
                    e.preventDefault();
					$("#theme-vars").toggle();
				});
			});
		</script>
		
			
        <p>&copy; Courtenay Probert 2013</p>
      </footer>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    
	<script src='scripts/libraries-min-v1.1.js'></script>
	<script src='stylesheets/base-v1.1.css'></script>
    
  </body>
</html>
